# conjur policy load -f authn-azure-AzureWS.yml -b conjur/authn-azure
# conjur variable set -i conjur/authn-azure/AzureTerraform/provider-uri -v https://sts.windows.net/af45c5e4-9498-4574-a8d8-5386b8d80162/
# conjur authenticator enable --id authn-azure/AzureTerraform
- !policy
  id: conjur/authn-azure/AzureTerraform
  body:
  - !webservice

  - !variable
    id: provider-uri

  - !group
    id: apps
    annotations:
      description: Group of hosts that can authenticate using the authn-azure/AzureTerraform authenticator

  - !permit
    role: !group apps
    privilege: [ read, authenticate ]
    resource: !webservice

  - !webservice
    id: status
    annotations:
      description: Status service to check that the authenticator is configured correctly

  - !group
    id: operators
    annotations:
      description: Group of users who can check the status of the authenticator

  - !permit
     role: !group operators
     privilege: [ read ]
     resource: !webservice status